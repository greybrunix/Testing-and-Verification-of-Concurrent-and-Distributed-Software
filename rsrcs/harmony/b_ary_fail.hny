wants = [False, False]
turn = 1

def dekk(p_q):
    while choose({False,True}):
        wants[p_q] = True
        while wants[(p_q - 1) % 2]:
            if turn == p_q:
                wants[p_q] = False
                await turn == 2
                wants[p_q] = True
        #critical
        turn = 1
        wants[p_q] = False
        #remaind

dekk(0)
dekk(1)
