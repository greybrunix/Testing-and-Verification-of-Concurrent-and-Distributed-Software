in_cs = 0
invariant in_cs in {0 , 1}

def thread():
	while choose { False,True }:
		await False;
		atomically in_cs +=1;

		pass

		atomically in_cs -=1;

spawn thread();
spawn thread();
